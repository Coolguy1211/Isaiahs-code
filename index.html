<html>
    <head>
    <style>

    </style>

    </head>

    <body>
    <!--size selection-->

    <h3>Choose a size of your choice...</h3>

    <input type= "radio" id= "small" name="pizza_size" value="SMALL:10">
    <label for= "small"> Small</label><br>

    <input type= "radio" id= "medium" name="pizza_size" value="MEDIUM:12">
    <label for= "medium"> Medium</label><br>

    <input type= "radio" id= "large" name="pizza_size" value="LARGE:15">
    <label for= "large"> Large</label><br>

    <!--toppings selection-->
    <h3>Choose Toppings...</h3>

    <input type="checkbox" id="mushroom" name="toppings" value="MUSHROOM:1.50">
    <label for ="mushroom">Mushroom</label><br>

     <input type="checkbox" id="olive" name="toppings" value="OLIVE:1.00">
    <label for ="olive">Olive</label><br>

     <input type="checkbox" id="bell-pepper" name="toppings" value="BELL-PEPPER:1.25">
    <label for ="bell-pepper">Bell Pepper</label><br>


    <!--display the size-->

    <p id ="selectedSize">Selected size: None</p>

    <!--display the total price-->
    <p id ="totalPrice">Total $: 0.00</p>

    <!-- Tip input -->
    <label for="tipInput">Tip $:</label>
    <input type="number" id="tipInput" min="0" step="0.01" value="0.00">

    <!--display the toppings-->

    <p id ="selectedtoppings">Selected Toppings: None</p>


        <script>
    const checkboxes = document.querySelectorAll('input[name="toppings"]');
    const toppingTag = document.getElementById("selectedtoppings");

    const radios = document.querySelectorAll('input[name="pizza_size"]');
    const selectedSize = document.getElementById("selectedSize");

    const totalPrice = document.getElementById("totalPrice");
    const tipInput = document.getElementById("tipInput");

    function getSelectedSizePrice() {
      let price = 0;
      radios.forEach(radio => {
        if (radio.checked) {
          price = parseFloat(radio.value.split(":")[1]);
        }
      });
      return price;
    }

    function getSelectedToppingsPrice() {
      let price = 0;
      checkboxes.forEach(checkbox => {
        if (checkbox.checked) {
          price += parseFloat(checkbox.value.split(":")[1]);
        }
      });
      return price;
    }

    function getTipAmount() {
      return parseFloat(tipInput.value) || 0;
    }

    function updateAll() {
      // Update toppings text
      const selectedToppings = [];
      checkboxes.forEach(checkbox => {
        if (checkbox.checked) {
          selectedToppings.push(checkbox.value.split(":")[0]);
        }
      });
      if (selectedToppings.length > 0) {
        toppingTag.textContent = "Topping(s) Selected: " + selectedToppings.join(', ');
      } else {
        toppingTag.textContent = "Topping(s) Selected: None";
      }

      // Update size text
      let sizeName = "None";
      radios.forEach(radio => {
        if (radio.checked) {
          sizeName = radio.value.split(":")[0];
        }
      });
      selectedSize.textContent = `Selected size: ${sizeName}`;

      // Update total price
      const total = getSelectedSizePrice() + getSelectedToppingsPrice() + getTipAmount();
      totalPrice.textContent = `Total Price: $${total.toFixed(2)}`;
    }

    checkboxes.forEach(checkbox => {
      checkbox.addEventListener('change', updateAll);
    });

    radios.forEach(radio => {
      radio.addEventListener('change', updateAll);
    });

    tipInput.addEventListener('input', updateAll);

    // Initialize on page load
    updateAll();

    function confirmOrder() {
    // Get size
    const size = document.querySelector('input[name="pizza_size"]:checked')?.value.split(':')[0] || 'None';
    
    // Get toppings
    const selectedToppings = [];
    checkboxes.forEach(checkbox => {
        if (checkbox.checked) {
            selectedToppings.push(checkbox.value.split(':')[0]);
        }
    });
    const toppings = selectedToppings.length > 0 ? selectedToppings.join(',') : 'None';
    
    // Get prices
    const subtotal = getSelectedSizePrice() + getSelectedToppingsPrice();
    const tip = getTipAmount();
    const total = subtotal + tip;
    
    // Redirect with all parameters
    window.location.href = `end.html?size=${size}&toppings=${toppings}&subtotal=${subtotal.toFixed(2)}&tip=${tip.toFixed(2)}&total=${total.toFixed(2)}`;
}
</script>

<br><br>
<button onclick="confirmOrder()">Confirm Order</button>
    </body>
</html>
